__NUXT_JSONP__("/documentation/Theory/protocols", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au){return {data:[{article:{slug:D,description:w,title:w,order:A,toc:[{id:L,depth:u,text:M},{id:N,depth:u,text:E},{id:O,depth:r,text:P},{id:Q,depth:r,text:R},{id:S,depth:r,text:T},{id:F,depth:u,text:G},{id:U,depth:r,text:V},{id:W,depth:r,text:X},{id:Y,depth:u,text:H},{id:Z,depth:r,text:_},{id:$,depth:r,text:aa},{id:ab,depth:u,text:I},{id:ac,depth:r,text:ad},{id:ae,depth:r,text:af},{id:ag,depth:r,text:ah},{id:ai,depth:r,text:aj}],body:{type:"root",children:[{type:b,tag:"h1",props:{id:D},children:[{type:b,tag:e,props:{href:"#protocols",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:w}]},{type:a,value:c},{type:b,tag:x,props:{id:L},children:[{type:b,tag:e,props:{href:y,ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:M}]},{type:a,value:c},{type:b,tag:v,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:ak},children:[{type:a,value:E}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:al},children:[{type:a,value:G}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:am},children:[{type:a,value:H}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:an},children:[{type:a,value:I}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{id:N},children:[{type:b,tag:e,props:{href:ak,ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:E}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:y},children:[{type:a,value:B}]}]},{type:a,value:c},{type:b,tag:s,props:{id:O},children:[{type:b,tag:e,props:{href:"#understanding-smb",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:P}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"SMB - "},{type:b,tag:g,props:{},children:[{type:a,value:"Server Message Block Protocol"}]},{type:a,value:" is a client-server communication protocol used for sharing access to files, printers, serial ports and other resources on a network."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Servers make fily systems and other resources available to clients on the network.\nClient computers may have their own hard disks, but they also want access to the shared file systems and printers on the servers."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The SMB protocol is known as a response-request protocol, meaning that it transmits multiple messages between the client and server to establish a connection. Clients connec to server using TCP\u002FIP, NetBEUI or IPX\u002FSPX."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Once they have established a connection, client can then send commands (SMBs) to the server that allow them to access shares, open files, read and write files, and generally do all the sort of things that you want to do with a file system. However, in the case of SMB, these things are done over the network"}]},{type:a,value:c},{type:b,tag:s,props:{id:Q},children:[{type:b,tag:e,props:{href:"#enumerating-smb",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:R}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:g,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.kali.org\u002Ftools\u002Fenum4linux\u002F",rel:[m,n,o],target:p},children:[{type:a,value:"Enum4Linux"}]}]},{type:a,value:" Enum4linux is a tool for enumerating information from Windows and Samba systems. It is written in PERL and is basically a wrapper around the Samba tools smbclient, rpclient, net and nmblookup. The samba package is therefore a dependency."}]},{type:a,value:c},{type:b,tag:s,props:{id:S},children:[{type:b,tag:e,props:{href:"#exploiting-smb",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:T}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"To acces an SMB share we need a client to access resources on servers."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"There are multiple tools that helps us communicate through SMB protocol but the most used are:"}]},{type:a,value:c},{type:b,tag:v,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002FPorchetta-Industries\u002FCrackMapExec",rel:[m,n,o],target:p},children:[{type:a,value:"CrackMapExec"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:ao,rel:[m,n,o],target:p},children:[{type:a,value:"smbclient"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002FShawnDEvans\u002Fsmbmap",rel:[m,n,o],target:p},children:[{type:a,value:"smbmap"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"SMB terminal has different commands. Those can be found "},{type:b,tag:e,props:{href:ao,rel:[m,n,o],target:p},children:[{type:a,value:C}]},{type:a,value:" or by writing "},{type:b,tag:t,props:{},children:[{type:a,value:"help"}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:x,props:{id:F},children:[{type:b,tag:e,props:{href:al,ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:y},children:[{type:a,value:B}]}]},{type:a,value:c},{type:b,tag:s,props:{id:U},children:[{type:b,tag:e,props:{href:"#understanding-ftp",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:V}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The standard port for ftp is "},{type:b,tag:g,props:{},children:[{type:a,value:"Port 21"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"FTP or "},{type:b,tag:g,props:{},children:[{type:a,value:"File Transfer Protocol"}]},{type:a,value:" is a protocol used to allow remote transfer of files over a network. It uses a client-server model to do this, and relays commands and data in a very efficient way."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"A typical FTP session operates using two channels:"}]},{type:a,value:c},{type:b,tag:v,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"A command (sometimes called "},{type:b,tag:q,props:{},children:[{type:a,value:"the control"}]},{type:a,value:") channel"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"A data channel"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The command channel is used for transmitting commands as well as replies to those commands.\nThe data channel is used for transferring data."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"FTP operates using a client-server protocol. The client initiates a connection with the server, the server validates whatever login credentials are provided and then opens the session."}]},{type:a,value:c},{type:b,tag:v,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"In an "},{type:b,tag:g,props:{},children:[{type:a,value:"Active"}]},{type:a,value:" FTP connection the client opens a port and listens. The server is required to actively connect to it"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"In a "},{type:b,tag:g,props:{},children:[{type:a,value:"Passive"}]},{type:a,value:" FTP connection, the server opens a port and listen and the client connects to it."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"This separation of command information and data into separate channels is a way of being able to send commands to the server without having to wait for the current data transfer to finish. If both channels were interlinked, you could only enter commands in between data transfers, which wouldn't be efficient for either large file transfer or slow internet connections."}]},{type:a,value:c},{type:b,tag:s,props:{id:W},children:[{type:b,tag:e,props:{href:"#enumerating-ftp",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:X}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Enumeration for port 21 (commonly FTP) can be done via "},{type:b,tag:q,props:{},children:[{type:a,value:"NSE"}]},{type:a,value:ap},{type:b,tag:q,props:{},children:[{type:a,value:"Nmap Scripting Engine"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Nmap && NSE Example"}]},{type:a,value:c},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-bash","line-numbers"]},children:[{type:b,tag:t,props:{},children:[{type:a,value:"nmap -p21 -vvv "},{type:b,tag:h,props:{className:[K,aq]},children:[{type:a,value:ar}]},{type:a,value:".10.5\nnmap -p21 -vvv --script "},{type:b,tag:h,props:{className:[K,"string"]},children:[{type:a,value:"\"ftp*\""}]},{type:a,value:" "},{type:b,tag:h,props:{className:[K,aq]},children:[{type:a,value:ar}]},{type:a,value:".10.5\n"}]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"We can also connect to the port directly or bruteforcing our way in using the default command "},{type:b,tag:t,props:{},children:[{type:a,value:F}]},{type:a,value:" installed on most linux servers."}]},{type:a,value:c},{type:b,tag:x,props:{id:Y},children:[{type:b,tag:e,props:{href:am,ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:y},children:[{type:a,value:B}]}]},{type:a,value:c},{type:b,tag:s,props:{id:Z},children:[{type:b,tag:e,props:{href:"#understanding-smtp",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:_}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"SMTP stands for Simple Mail Transfer Protocol. It is used to handle the sending of emails. In order to support email services, a protocol pair is required, compriseing of SMTP and POP\u002FIMAP."}]},{type:a,value:c},{type:b,tag:v,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"POP"}]},{type:a,value:" : "},{type:b,tag:g,props:{},children:[{type:a,value:"Post Office Protocl"}]},{type:a,value:"* is used to recover email messages from a mail server to an email client."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"IMAP"}]},{type:a,value:": "},{type:b,tag:g,props:{},children:[{type:a,value:"Internet Message Access Protocol"}]},{type:a,value:" is the most sofisticated protocol. Allows users group related messages and storage them in folders. It has markers such as "},{type:b,tag:q,props:{},children:[{type:a,value:"Read"}]},{type:a,value:", "},{type:b,tag:q,props:{},children:[{type:a,value:"Deleted"}]},{type:a,value:ap},{type:b,tag:q,props:{},children:[{type:a,value:"Re-sended"}]},{type:a,value:". It also allows users to search in the mailbox."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Together they allow the user to send outgoing mail and rertrieve incoming mail, respectively."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The SMTP server performs three basic functions:"}]},{type:a,value:c},{type:b,tag:v,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"It verifies who is sending emaills through the SMTP server"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"It sends the outgoing mail"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If the outgoing mail can't be delivered it send the message back to the sender."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"How it works?"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Email delivery functions much the same as the physical mail delivery system."}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The mail user agent, which is either your email client or an external program. Connect to the SMTP server of your domain, e.g. smtp.google.com. This initiates the SMTP handshake. This connection works over the SMTP port which is usually "},{type:b,tag:g,props:{},children:[{type:a,value:"25"}]},{type:a,value:". Once these connections have been made and validated, the SMTP session starts."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The process of sending mail can now begin. The client first submits the sender, and recipient's email address - the body of the email and any attachments, to the server."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The SMTP server then checks wheher the domain name of the recipient and the sender is the same."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The SMTP server of the sender will make a connection to the recipient's SMTP server before relaying the email. If the recipient's server can't be accessed, or is not available - the Email gets put into an SMTP queue."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Then, the recipient's SMTP server will verify the incoming email. It does this by checking if the domain and user name have been recognised. The server will then forward the email to the POP or IMAP server, as shown in the diagram above."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The e-mail will then show up in the recipient's inbox."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Advanced and more detailed step by step "},{type:b,tag:e,props:{href:"https:\u002F\u002Fcomputer.howstuffworks.com\u002Fe-mail-messaging\u002Femail3.htm",rel:[m,n,o],target:p},children:[{type:a,value:C}]},{type:a,value:" and "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.afternerd.com\u002Fblog\u002Fsmtp\u002F",rel:[m,n,o],target:p},children:[{type:a,value:C}]}]},{type:a,value:c},{type:b,tag:s,props:{id:$},children:[{type:b,tag:e,props:{href:"#enumerating-smtp",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:aa}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Poorly configured or vulnerable mail servers can often provide an initial foothold into a network, but prior to launchaning an attack, we want to "},{type:b,tag:q,props:{},children:[{type:a,value:"fingerprint"}]},{type:a,value:" the server to make our targeting as precise as possible. We're going to use the "},{type:b,tag:q,props:{},children:[{type:a,value:"smtp_version"}]},{type:a,value:" module in "},{type:b,tag:g,props:{},children:[{type:a,value:"MetaSploit"}]},{type:a,value:" to do this."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The STMP service has "},{type:b,tag:q,props:{},children:[{type:a,value:"two"}]},{type:a,value:" internal commands that allow the enumartion of users:"}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"VRFY"}]},{type:a,value:": confirming the names of valid users"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"EXPN"}]},{type:a,value:": Which reveals the actual address of user's aliases and list of e-mail (mailing lists)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Using these SMTP commands we can reveal a list of valid users.\nThis can be done manually over a telnet connection but Metasploit does it for us with the module "},{type:b,tag:q,props:{},children:[{type:a,value:"smtp_enum"}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Alternatives to Metasploit"}]},{type:a,value:"\nAlternatively non-metasploit tools such as "},{type:b,tag:g,props:{},children:[{type:a,value:"smtp-user-enum"}]},{type:a,value:" is worth noting."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:as},{type:b,tag:e,props:{href:at,rel:[m,n,o],target:p},children:[{type:a,value:"@TryHackMe"}]}]},{type:a,value:c},{type:b,tag:x,props:{id:ab},children:[{type:b,tag:e,props:{href:an,ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:y},children:[{type:a,value:B}]}]},{type:a,value:c},{type:b,tag:s,props:{id:ac},children:[{type:b,tag:e,props:{href:"#understanding-nfs",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:ad}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"NFS stands for "},{type:b,tag:g,props:{},children:[{type:a,value:"Network File System"}]},{type:a,value:" and allows a system to share directories and files with others over a network. By using NFS, users and programs can access files on remote systems almost as if they were local files. It does this by mounting all, or a portion of a file system on a server. The portion of the file system that is mounted can be accessed by clientes with whatever privileges are assigned to each file."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"More info "},{type:b,tag:e,props:{href:"https:\u002F\u002Fdocs.oracle.com\u002Fcd\u002FE19683-01\u002F816-4882\u002F6mb2ipq7l\u002Findex.html",rel:[m,n,o],target:p},children:[{type:a,value:C}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.datto.com\u002Fblog\u002Fwhat-is-nfs-file-share",rel:[m,n,o],target:p},children:[{type:a,value:"What is nfs file share"}]},{type:a,value:c},{type:b,tag:e,props:{href:"http:\u002F\u002Fnfs.sourceforge.net\u002F",rel:[m,n,o],target:p},children:[{type:a,value:"Sourceforge NFS"}]},{type:a,value:c},{type:b,tag:e,props:{href:"https:\u002F\u002Fwiki.archlinux.org\u002Ftitle\u002FNFS",rel:[m,n,o],target:p},children:[{type:a,value:"Archlinux NFS definition"}]}]},{type:a,value:c},{type:b,tag:s,props:{id:ae},children:[{type:b,tag:e,props:{href:"#how-does-nfs-work",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:af}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The client request to mount a directory from a remote host on a local directory just the same way it can mount a physical device."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The mount service will then act to connect to the relevant mount daemon using RPC ("},{type:b,tag:q,props:{},children:[{type:a,value:"Remote Procedure Call"}]},{type:a,value:")"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The server checks if the user has permission to mount whatever directory has been requested. It will then return a file handle which uniquely identifies each file and directory that is on the server"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If someone wants to access a file using NFS, an RPC call is placed to "},{type:b,tag:g,props:{},children:[{type:a,value:"NFSD"}]},{type:a,value:" (the NFS daemon) on the server."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"This call takes parameters such as\n"},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The file handle"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The name of the file to be accessed"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The user's, user id"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The user's group id"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"A computer running Windows Server can act as an NFS file server for other non-Windows client computers. Likewise, NFS allows a Windows-based computer running Windows Server to access files stored on a non-Windows NFS server."}]},{type:a,value:c},{type:b,tag:s,props:{id:ag},children:[{type:b,tag:e,props:{href:"#enumerating-nfs",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:ah}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For a more advanced enumeration of the NFS server we can use "},{type:b,tag:g,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fpackages.ubuntu.com\u002Fxenial\u002Fnfs-common",rel:[m,n,o],target:p},children:[{type:a,value:"nfs-common"}]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:"img",props:{alt:"NFS Scans",src:"\u002Fimages\u002Fdocs\u002Ftheory\u002Fprotocols\u002Fnfs_scans.png"},children:[]}]},{type:a,value:c},{type:b,tag:s,props:{id:ai},children:[{type:b,tag:e,props:{href:"#exploiting-nfs",ariaHidden:i,tabIndex:j},children:[{type:b,tag:h,props:{className:[k,l]},children:[]}]},{type:a,value:aj}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"If you have a low privilege shell on any machine and you found that a machine has an NFS share you might be able to use that to escalate privileges, depending on how it is configured."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"By default, on NFS shares "},{type:b,tag:g,props:{},children:[{type:a,value:"Root Squashing"}]},{type:a,value:" is enabled, and prevents anyone connecting to the NFS share from having root access to the NFS volume. Remote root users are assigned a user "},{type:b,tag:q,props:{},children:[{type:a,value:"nfsnobody"}]},{type:a,value:" when connceted, which has the least local privileges. However, if this is turned off, it can allow the creation of SUID bit files, allowing a remote user root access to the connected system."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"SUID bit set"}]},{type:a,value:"  on files essentially meants that the file or files can be run with the permissions of the file(s) owner\u002Fgroup. In this case, as the super user!"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Steps:"}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Download "},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fpolo-sec\u002Fwriting\u002Fblob\u002Fmaster\u002FSecurity%20Challenge%20Walkthroughs\u002FNetworks%202\u002Fbash",rel:[m,n,o],target:p},children:[{type:a,value:"bash"}]},{type:a,value:" executable"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Bash shell must be owned by a root user, this can be set by "},{type:b,tag:t,props:{},children:[{type:a,value:"sudo chown root bash"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Then we add the SUID bit permission plus the write\u002Fread\u002Fexecute permission "},{type:b,tag:t,props:{},children:[{type:a,value:"sudo chmod +swrx bash"}]},{type:a,value:", where "},{type:b,tag:t,props:{},children:[{type:a,value:"s"}]},{type:a,value:" set the SUID bit set using chmod"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We then check it ends with -sr-x using "},{type:b,tag:t,props:{},children:[{type:a,value:"ls -la"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Then run the bash (entering with .ssh) as "},{type:b,tag:t,props:{},children:[{type:a,value:".\u002Fbash -p"}]},{type:a,value:", the swith "},{type:b,tag:t,props:{},children:[{type:a,value:d}]},{type:a,value:" persists the permissions, so that it can run as root with SUID."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"That's it! We have a root shell!."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:as},{type:b,tag:e,props:{href:at,rel:[m,n,o],target:p},children:[{type:a,value:"TryHackMe"}]}]}]},dir:"\u002Fdocumentation\u002FTheory",path:au,extension:".md",createdAt:"2022-07-24T21:47:52.568Z",updatedAt:"2022-07-24T21:58:45.950Z"},articles:[{slug:"winexploitsuggester",description:"Windows Exploit Suggester",title:"WinExploit Suggester",order:u,path:"\u002Fdocumentation\u002FTools\u002Fwindowsexploitsuggester"},{slug:"filetransfer",description:"File transferring documentation",title:"File Transfer",order:A,path:"\u002Fdocumentation\u002FTechniques\u002Ffiletransfer"},{slug:"windowsarchitecture",description:"Windows Architecture",title:"Windows Arch",order:A,path:"\u002Fdocumentation\u002FGood2Know\u002Fwindowsarchitecture"},{slug:D,description:w,title:w,order:A,path:au}]}],fetch:{},mutations:void 0}}("text","element","\n","p","a","li","strong","span","true",-1,"icon","icon-link","nofollow","noopener","noreferrer","_blank","em",3,"h3","code",2,"ul","Protocols","h2","#index","ol",1,"Go Index","here","protocols","SMB","ftp","FTP","SMTP","NFS",".","token","index","Index","smb","understanding-smb","Understanding SMB","enumerating-smb","Enumerating SMB","exploiting-smb","Exploiting SMB","understanding-ftp","Understanding FTP","enumerating-ftp","Enumerating FTP","smtp","understanding-smtp","Understanding SMTP","enumerating-smtp","Enumerating SMTP","nfs","understanding-nfs","Understanding NFS","how-does-nfs-work","How does NFS work?","enumerating-nfs","Enumerating NFS","exploiting-nfs","Exploiting NFS","#smb","#ftp","#smtp","#nfs","https:\u002F\u002Fwww.samba.org\u002Fsamba\u002Fdocs\u002Fcurrent\u002Fman-html\u002Fsmbclient.1.html"," or ","number","10.10","Credits to ","https:\u002F\u002Fwww.tryhackme.com","\u002Fdocumentation\u002FTheory\u002Fprotocols")));